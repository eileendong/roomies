# Roomies - AWS Amplify Track Setup Guide

## âœ… Current Status
Your project is now properly configured for the AWS Amplify track with React 18 compatibility.

## ğŸš€ Setup Instructions

### 1. Install AWS Amplify Backend Packages
```bash
# Install the AWS Amplify backend packages (run these separately to avoid cache issues)
npm install @aws-amplify/backend@latest --legacy-peer-deps
npm install @aws-amplify/backend-cli@latest --legacy-peer-deps
```

### 2. Initialize Amplify Backend
```bash
# Initialize the Amplify backend
npx ampx sandbox
```

### 3. Pull Amplify Configuration
```bash
# Pull the backend configuration
npx ampx sandbox --once
```

### 4. Install Additional Packages (if needed)
```bash
# Install any missing packages
npm install @tailwindcss/postcss --legacy-peer-deps
```

## ğŸ“ Project Structure
```
roomies/
â”œâ”€â”€ amplify/
â”‚   â”œâ”€â”€ backend.ts          # Main backend configuration
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â””â”€â”€ resource.ts     # Authentication configuration
â”‚   â””â”€â”€ data/
â”‚       â””â”€â”€ resource.ts     # Database schema (Expense, Roommate, Group)
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.jsx           # Amplify initialization
â”‚   â”œâ”€â”€ App.tsx            # Main app component
â”‚   â””â”€â”€ components/         # Your React components
â”œâ”€â”€ package.json           # Updated for AWS track
â””â”€â”€ amplify_outputs.json   # Generated by Amplify
```

## ğŸ”§ Key Features Implemented

### Database Schema
- **Expense Model**: Stores expense data with amount, description, payer, groupId, timestamp, category, splitBetween, settled
- **Roommate Model**: Stores roommate information with name, email, groupId, balance
- **Group Model**: Stores group information with name, members, createdAt

### Authentication
- Email-based authentication configured
- User pool authorization for all models

### React 18 Compatibility
- All packages updated to React 18 compatible versions
- AWS Amplify UI React 6.13.0 (supports React 18)
- Vite 5.4.11 for development

## ğŸ¯ Next Steps for Your Team

### For Each Teammate:
1. **Clone the repo**: `git clone <your-repo-url>`
2. **Install dependencies**: `npm ci`
3. **Switch to your branch**: `git checkout -b <your-name>-branch`
4. **Start development**: `npm run dev`

### AWS Setup (Per Teammate):
1. **Install AWS CLI**: Follow the links in your requirements
2. **Configure AWS SSO**:
   ```bash
   aws configure sso
   # Use: https://d-9a67519b0f.awsapps.com/start
   # Region: us-east-2
   # Profile: default
   ```
3. **Initialize Amplify**: `npx ampx sandbox`

## ğŸ”„ Syncing Global Values

### For Roommate Balances (Green/Red amounts):
The database schema includes a `balance` field in the Roommate model that can be used to track:
- **Positive balance**: Amount they owe you (red for them)
- **Negative balance**: Amount you owe them (green for you)

### Implementation in Components:
```javascript
// Example usage in your components
import { generateClient } from "aws-amplify/data";
import type { Schema } from "../amplify/data/resource";

const client = generateClient<Schema>();

// Fetch roommate data
const { data: roommates } = await client.models.Roommate.list();

// Update balance when expense is added
await client.models.Roommate.update({
  id: roommateId,
  balance: newBalance
});
```

## ğŸš¨ Important Notes

1. **React 18 Compatibility**: Your project is now fully compatible with React 18 and AWS Amplify
2. **Package Issues**: Some AWS CDK packages may cause cache issues - install them separately if needed
3. **Branching**: Always work in feature branches, never commit directly to main
4. **Amplify Outputs**: The `amplify_outputs.json` file will be generated after running `npx ampx sandbox`

## ğŸ¨ Frontend Features Ready
- âœ… ChoreDetailDrawer component
- âœ… Dashboard with stats and charts
- âœ… LeaderBoard with roommate rankings
- âœ… RandomSpinner for chore assignment
- âœ… WeeklySummary with AI insights
- âœ… All components use React 18 compatible packages

## ğŸ”— AWS Services Integration
- **Lambda**: Backend functions (configured in amplify/backend.ts)
- **DynamoDB**: Database (configured in amplify/data/resource.ts)
- **API Gateway**: REST endpoints (auto-configured by Amplify)
- **S3**: File storage (can be added to backend.ts)
- **Textract**: Receipt parsing (can be added as Lambda function)
- **Amplify Hosting**: Frontend deployment (configured for React)

Your project is now ready for the AWS Amplify track! ğŸ‰
